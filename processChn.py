from hanzi2pinyin.Converter import Converter  # 汉字转拼音

# 以下这段注释为初始化，第一次只运行这段并依照generate.py开头注释运行生成向量的指令，以后只运行未被注释的代码
# generate mappings between spelling and ipa

pinyin_map = {
    "an": "an",
    "ai": "aɪ",
    "ei": "eɪ",
    "fan": "fan",
    "fei": "feɪ",
    "fu": "fu",
    "fo": "fuɔ",
    "fa": "fɑ",
    "fang": "fɑŋ",
    "fen": "fən",
    "feng": "fəŋ",
    "fou": "fɤʊ",
    "yi": "i",
    "yin": "in",
    "ying": "iŋ",
    "yong": "jʊŋ",
    "ye": "iɛ",
    "yan": "iɛn",
    "ya": "iɑ",
    "yang": "iɑŋ",
    "yao": "iɑʊ",
    "you": "iɤʊ",
    "gan": "kan",
    "gai": "kaɪ",
    "gei": "keɪ",
    "gu": "ku",
    "guan": "kuan",
    "guai": "kuaɪ",
    "gui": "kueɪ",
    "gua": "kuɑ",
    "guang": "kuɑŋ",
    "guo": "kuɔ",
    "gun": "kuən",
    "ga": "kɑ",
    "gang": "kɑŋ",
    "gao": "kɑʊ",
    "gen": "kən",
    "geng": "kəŋ",
    "gou": "kɤʊ",
    "ge": "kɯʌ",
    "gong": "kʊŋ",
    "kan": "kʰan",
    "kai": "kʰaɪ",
    "kei": "kʰeɪ",
    "ku": "kʰu",
    "kuan": "kʰuan",
    "kuai": "kʰuaɪ",
    "kui": "kʰueɪ",
    "kua": "kʰuɑ",
    "kuang": "kʰuɑŋ",
    "kuo": "kʰuɔ",
    "kun": "kʰuən",
    "ka": "kʰɑ",
    "kang": "kʰɑŋ",
    "kao": "kʰɑʊ",
    "ken": "kʰən",
    "keng": "kʰəŋ",
    "kou": "kʰɤʊ",
    "ke": "kʰɯʌ",
    "kong": "kʰʊŋ",
    "lan": "lan",
    "lai": "laɪ",
    "lei": "leɪ",
    "li": "li",
    "lin": "lin",
    "ling": "liŋ",
    "lie": "liɛ",
    "lian": "liɛn",
    "lia": "liɑ",
    "liang": "liɑŋ",
    "liao": "liɑʊ",
    "liu": "liɤʊ",
    "lu": "lu",
    "luan": "luan",
    "lo": "luɔ",
    "luo": "luɔ",
    "lun": "luən",
    "lv": "ly",
    "lve": "lyœ",
    "la": "lɑ",
    "lang": "lɑŋ",
    "lao": "lɑʊ",
    "leng": "ləŋ",
    "lou": "lɤʊ",
    "le": "lɯʌ",
    "long": "lʊŋ",
    "man": "man",
    "mai": "maɪ",
    "mei": "meɪ",
    "mi": "mi",
    "min": "min",
    "ming": "miŋ",
    "mie": "miɛ",
    "mian": "miɛn",
    "miao": "miɑʊ",
    "miu": "miɤʊ",
    "mu": "mu",
    "mo": "muɔ",
    "ma": "mɑ",
    "mang": "mɑŋ",
    "mao": "mɑʊ",
    "men": "mən",
    "meng": "məŋ",
    "mou": "mɤʊ",
    "me": "mɯʌ",
    "nan": "nan",
    "nai": "naɪ",
    "nei": "neɪ",
    "ni": "ni",
    "nin": "nin",
    "ning": "niŋ",
    "nie": "niɛ",
    "nian": "niɛn",
    "niang": "niɑŋ",
    "niao": "niɑʊ",
    "niu": "niɤʊ",
    "nu": "nu",
    "nuan": "nuan",
    "nuo": "nuɔ",
    "nv": "ny",
    "nve": "nyœ",
    "na": "nɑ",
    "nang": "nɑŋ",
    "nao": "nɑʊ",
    "nen": "nən",
    "neng": "nəŋ",
    "nou": "nɤʊ",
    "ne": "nɯʌ",
    "nong": "nʊŋ",
    "ban": "pan",
    "bai": "paɪ",
    "bei": "peɪ",
    "bi": "pi",
    "bin": "pin",
    "bing": "piŋ",
    "bie": "piɛ",
    "bian": "piɛn",
    "biang": "piɑŋ",
    "biao": "piɑʊ",
    "bu": "pu",
    "bo": "puɔ",
    "ba": "pɑ",
    "bang": "pɑŋ",
    "bao": "pɑʊ",
    "ben": "pən",
    "beng": "pəŋ",
    "pan": "pʰan",
    "pai": "pʰaɪ",
    "pei": "pʰeɪ",
    "pi": "pʰi",
    "pin": "pʰin",
    "ping": "pʰiŋ",
    "pie": "pʰiɛ",
    "pian": "pʰiɛn",
    "piao": "pʰiɑʊ",
    "pu": "pʰu",
    "po": "pʰuɔ",
    "pa": "pʰɑ",
    "pang": "pʰɑŋ",
    "pao": "pʰɑʊ",
    "pen": "pʰən",
    "peng": "pʰəŋ",
    "pou": "pʰɤʊ",
    "san": "san",
    "sai": "saɪ",
    "su": "su",
    "suan": "suan",
    "sui": "sueɪ",
    "suo": "suɔ",
    "sun": "suən",
    "sa": "sɑ",
    "sang": "sɑŋ",
    "sao": "sɑʊ",
    "sen": "sən",
    "seng": "səŋ",
    "sou": "sɤʊ",
    "se": "sɯʌ",
    "si": "sɹ",
    "song": "sʊŋ",
    "dan": "tan",
    "dai": "taɪ",
    "dei": "teɪ",
    "di": "ti",
    "ding": "tiŋ",
    "die": "tiɛ",
    "dian": "tiɛn",
    "diao": "tiɑʊ",
    "diu": "tiɤʊ",
    "zan": "t͡san",
    "zai": "t͡saɪ",
    "zei": "t͡seɪ",
    "zu": "t͡su",
    "zuan": "t͡suan",
    "zui": "t͡sueɪ",
    "zuo": "t͡suɔ",
    "zun": "t͡suən",
    "za": "t͡sɑ",
    "zang": "t͡sɑŋ",
    "zao": "t͡sɑʊ",
    "zen": "t͡sən",
    "zeng": "t͡səŋ",
    "zou": "t͡sɤʊ",
    "ze": "t͡sɯʌ",
    "zi": "t͡sɹ",
    "zong": "t͡sʊŋ",
    "can": "t͡sʰan",
    "cai": "t͡sʰaɪ",
    "cei": "t͡sʰeɪ",
    "cu": "t͡sʰu",
    "cuan": "t͡sʰuan",
    "cui": "t͡sʰueɪ",
    "cuo": "t͡sʰuɔ",
    "cun": "t͡sʰuən",
    "ca": "t͡sʰɑ",
    "cang": "t͡sʰɑŋ",
    "cao": "t͡sʰɑʊ",
    "cen": "t͡sʰən",
    "ceng": "t͡sʰəŋ",
    "cou": "t͡sʰɤʊ",
    "ce": "t͡sʰɯʌ",
    "ci": "t͡sʰɹ",
    "cong": "t͡sʰʊŋ",
    "du": "tu",
    "duan": "tuan",
    "dui": "tueɪ",
    "duo": "tuɔ",
    "dun": "tuən",
    "da": "tɑ",
    "dang": "tɑŋ",
    "dao": "tɑʊ",
    "ji": "t͡ɕi",
    "jin": "t͡ɕin",
    "jing": "t͡ɕiŋ",
    "jie": "t͡ɕiɛ",
    "jian": "t͡ɕiɛn",
    "jia": "t͡ɕiɑ",
    "jiang": "t͡ɕiɑŋ",
    "jiao": "t͡ɕiɑʊ",
    "jiu": "t͡ɕiɤʊ",
    "jiong": "t͡ɕiʊŋ",
    "ju": "t͡ɕy",
    "jun": "t͡ɕyn",
    "jue": "t͡ɕyœ",
    "juan": "t͡ɕyɛn",
    "qi": "t͡ɕʰi",
    "qin": "t͡ɕʰin",
    "qing": "t͡ɕʰiŋ",
    "qie": "t͡ɕʰiɛ",
    "qian": "t͡ɕʰiɛn",
    "qia": "t͡ɕʰiɑ",
    "qiang": "t͡ɕʰiɑŋ",
    "qiao": "t͡ɕʰiɑʊ",
    "qiu": "t͡ɕʰiɤʊ",
    "qiong": "t͡ɕʰiʊŋ",
    "qu": "t͡ɕʰy",
    "qun": "t͡ɕʰyn",
    "que": "t͡ɕʰyœ",
    "quan": "t͡ɕʰyɛn",
    "den": "tən",
    "deng": "təŋ",
    "dou": "tɤʊ",
    "de": "tɯʌ",
    "de5": "tə",
    "zhan": "ʈ͡ʂan",
    "zhai": "ʈ͡ʂaɪ",
    "zhei": "ʈ͡ʂeɪ",
    "zhu": "ʈ͡ʂu",
    "zhuan": "ʈ͡ʂuan",
    "zhuai": "ʈ͡ʂuaɪ",
    "zhui": "ʈ͡ʂueɪ",
    "zhua": "ʈ͡ʂuɑ",
    "zhuo": "ʈ͡ʂuɔ",
    "zhun": "ʈ͡ʂuən",
    "zha": "ʈ͡ʂɑ",
    "zhang": "ʈ͡ʂɑŋ",
    "zhao": "ʈ͡ʂɑʊ",
    "zhen": "ʈ͡ʂən",
    "zheng": "ʈ͡ʂəŋ",
    "zhou": "ʈ͡ʂɤʊ",
    "zhe": "ʈ͡ʂɯʌ",
    "zhi": "ʈ͡ʂɻ",
    "zhong": "ʈ͡ʂʊŋ",
    "chan": "ʈ͡ʂʰan",
    "chai": "ʈ͡ʂʰaɪ",
    "chu": "ʈ͡ʂʰu",
    "chuan": "ʈ͡ʂʰuan",
    "chuai": "ʈ͡ʂʰuaɪ",
    "chui": "ʈ͡ʂʰueɪ",
    "chua": "ʈ͡ʂʰuɑ",
    "chuang": "ʈ͡ʂʰuɑŋ",
    "chuo": "ʈ͡ʂʰuɔ",
    "chun": "ʈ͡ʂʰuən",
    "cha": "ʈ͡ʂʰɑ",
    "chang": "ʈ͡ʂʰɑŋ",
    "chao": "ʈ͡ʂʰɑʊ",
    "chen": "ʈ͡ʂʰən",
    "cheng": "ʈ͡ʂʰəŋ",
    "chou": "ʈ͡ʂʰɤʊ",
    "che": "ʈ͡ʂʰɯʌ",
    "chi": "ʈ͡ʂʰɻ",
    "chong": "ʈ͡ʂʰʊŋ",
    "zhuang": "ʈ͡ʂuɑŋ",
    "dong": "tʊŋ",
    "tan": "tʰan",
    "tai": "tʰaɪ",
    "ti": "tʰi",
    "ting": "tʰiŋ",
    "tie": "tʰiɛ",
    "tian": "tʰiɛn",
    "tiao": "tʰiɑʊ",
    "tu": "tʰu",
    "tuan": "tʰuan",
    "tui": "tʰueɪ",
    "tuo": "tʰuɔ",
    "tun": "tʰuən",
    "ta": "tʰɑ",
    "tang": "tʰɑŋ",
    "tao": "tʰɑʊ",
    "teng": "tʰəŋ",
    "tou": "tʰɤʊ",
    "te": "tʰɯʌ",
    "tong": "tʰʊŋ",
    "wu": "u",
    "wan": "uan",
    "wai": "uaɪ",
    "wei": "ueɪ",
    "wa": "uɑ",
    "wang": "uɑŋ",
    "wo": "uɔ",
    "wen": "uən",
    "weng": "uəŋ",
    "han": "xan",
    "hai": "xaɪ",
    "hei": "xeɪ",
    "hu": "xu",
    "huan": "xuan",
    "huai": "xuaɪ",
    "hui": "xueɪ",
    "hua": "xuɑ",
    "huang": "xuɑŋ",
    "huo": "xuɔ",
    "hun": "xuən",
    "ha": "xɑ",
    "hang": "xɑŋ",
    "hao": "xɑʊ",
    "hen": "xən",
    "heng": "xəŋ",
    "hou": "xɤʊ",
    "he": "xɯʌ",
    "hong": "xʊŋ",
    "yo": "yɔ",
    "yu": "y",
    "yun": "yn",
    "yue": "yœ",
    "yuan": "yɛn",
    "a": "ɑ",
    "ang": "ɑŋ",
    "er": "ɑɻ",
    "ao": "ɑʊ",
    "o": "ɔ",
    "xi": "ɕi",
    "xin": "ɕin",
    "xing": "ɕiŋ",
    "xie": "ɕiɛ",
    "xian": "ɕiɛn",
    "xia": "ɕiɑ",
    "xiang": "ɕiɑŋ",
    "xiao": "ɕiɑʊ",
    "xiu": "ɕiɤʊ",
    "xiong": "ɕiʊŋ",
    "xu": "ɕy",
    "xun": "ɕyn",
    "xue": "ɕyœ",
    "xuan": "ɕyɛn",
    "en": "ən",
    "eng": "əŋ",
    "ou": "ɤʊ",
    "e": "ɯʌ",
    "shan": "ʂan",
    "shai": "ʂaɪ",
    "shei": "ʂeɪ",
    "shu": "ʂu",
    "shuan": "ʂuan",
    "shuai": "ʂuaɪ",
    "shui": "ʂueɪ",
    "shua": "ʂuɑ",
    "shuang": "ʂuɑŋ",
    "shuo": "ʂuɔ",
    "shun": "ʂuən",
    "sha": "ʂɑ",
    "shang": "ʂɑŋ",
    "shao": "ʂɑʊ",
    "shen": "ʂən",
    "sheng": "ʂəŋ",
    "shou": "ʂɤʊ",
    "she": "ʂɯʌ",
    "shi": "ʂɻ",
    "ran": "ɻan",
    "ru": "ɻu",
    "ruan": "ɻuan",
    "rui": "ɻueɪ",
    "rua": "ɻuɑ",
    "ruo": "ɻuɔ",
    "run": "ɻuən",
    "rang": "ɻɑŋ",
    "rao": "ɻɑʊ",
    "ren": "ɻən",
    "reng": "ɻəŋ",
    "rou": "ɻɤʊ",
    "re": "ɻɯʌ",
    "ri": "ɻ",
    "rong": "ɻʊŋ"
}


def purify_chn(str):  # 规范化汉字拼音转ipa用法
    str = " ".join([lt for lt in str])
    str = str.replace(" ʰ ", "ʰ ")
    str = str.replace(" ͡ ", "͡")
    str = str.replace("ɹ", "ɨ")
    return str


with open('Chinese.txt', encoding='utf-8') as f:
    wlst = f.readlines()

c = Converter()
directory = "D:\\Project\\Work in Progress\\phonetic-similarity-vectors-master"
with open(directory + '\\ChineseV.txt', 'w', encoding='utf-8') as f:
    labelsPos = set()
    for phrase in wlst:
        nospace = phrase.strip()
        py = c.convert(nospace).split(",")
        while nospace in labelsPos:
            nospace += "/"
        labelsPos.add(nospace)
        res = ""
        print(py)
        for w in py:
            res += purify_chn(pinyin_map[w[:-1]]) + " "  # use "/" instead of " " when generating syllable table
        res = res[:-1]
        # f.write("".join(py) + "  " + res + "\n")
        f.write(nospace + "  " + res + "\n")
print("Chinese output completed")
